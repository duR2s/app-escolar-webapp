<mat-sidenav-container class="sidebar-container">
  <mat-sidenav [opened]="!isMobileView || mobileOpen" [mode]="isMobileView ? 'over' : 'side'" class="sidebar"
    (closedStart)="closeSidebar()" [disableClose]="!isMobileView">
    <nav>
      <ul class="sidebar-list">
        <!-- Inicio - Available for admin and teachers only -->
        <li *ngIf="canSeeHomeItem()" routerLink="/home" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>home</mat-icon>
          <span>Inicio</span>
        </li>

        <!-- Menú Desplegable de Registro (Nuevo) -->
        <li *ngIf="canSeeRegisterItem()">
          <div class="sidebar-item-header" (click)="toggleRegistros()">
            <div class="d-flex align-items-center">
              <mat-icon>person_add</mat-icon>
              <span>Registro</span>
            </div>
            <mat-icon class="expand-icon">{{ showRegistros ? 'expand_less' : 'expand_more' }}</mat-icon>
          </div>

          <!-- Submenú -->
          <ul class="submenu" *ngIf="showRegistros">
            <!-- Opción: Administrador -->
            <li routerLink="/registro/administrador" *ngIf="isAdmin()" routerLinkActive="active" (click)="closeSidebar()">
              <mat-icon class="sub-icon">admin_panel_settings</mat-icon>
              <span>Administrador</span>
            </li>
            <!-- Opción: Maestro -->
            <li routerLink="/registro/maestros" *ngIf="isAdmin() || isTeacher()" routerLinkActive="active" (click)="closeSidebar()">
              <mat-icon class="sub-icon">person</mat-icon>
              <span>Maestro</span>
            </li>
            <!-- Opción: Alumno -->
            <li routerLink="/registro/alumnos" *ngIf="isAdmin() || isTeacher()" routerLinkActive="active" (click)="closeSidebar()">
              <mat-icon class="sub-icon">school</mat-icon>
              <span>Alumno</span>
            </li>
            <!-- Opción: Materia (Solo Admin) -->
            <li *ngIf="isAdmin()" routerLink="/registro/materias" routerLinkActive="active" (click)="closeSidebar()">
              <mat-icon class="sub-icon">library_books</mat-icon>
              <span>Materia</span>
            </li>
          </ul>
        </li>

        <!-- Admins - Only for administrators -->
        <li *ngIf="canSeeAdminItems()" routerLink="/administrador" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>admin_panel_settings</mat-icon>
          <span>Admins</span>
        </li>

        <!-- Maestros - Only for administrators -->
        <li *ngIf="canSeeAdminItems()" routerLink="/maestros" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>people</mat-icon>
          <span>Maestros</span>
        </li>

        <!-- Alumnos - Available for all users -->
        <li *ngIf="canSeeStudentItems()" routerLink="/alumnos" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>school</mat-icon>
          <span>Alumnos</span>
        </li>

        <!-- Gráficas - Available for all users -->
        <li *ngIf="canSeeStudentItems()" routerLink="/graficas" routerLinkActive="active" (click)="closeSidebar()">
          <mat-icon>bar_chart</mat-icon>
          <span>Gráficas</span>
        </li>

        <!-- Eventos Académicos - Available for administrators and teachers -->
        <li *ngIf="canSeeTeacherItems()" routerLink="/eventos-academicos" routerLinkActive="active"
          class="eventos-academicos" (click)="closeSidebar()">
          <mat-icon>event</mat-icon>
          <span>Eventos Académicos</span>
        </li>
      </ul>
      <button mat-flat-button color="warn" class="logout-btn" (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Cerrar sesión</span>
      </button>
    </nav>
  </mat-sidenav>
  <mat-sidenav-content>
    <!-- Main content goes here -->
  </mat-sidenav-content>
</mat-sidenav-container>
